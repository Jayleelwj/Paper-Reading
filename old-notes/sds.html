
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Simultaneous Detection and Segmentation Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-disqus/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-exercises/exercises.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="r-cnn.html" />
    
    
    <link rel="prev" href="fcn.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="./">
            
                <a href="./">
            
                    
                    Old Notes
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="caffemd.html">
            
                <a href="caffemd.html">
            
                    
                    Caffe
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="idpr.html">
            
                <a href="idpr.html">
            
                    
                    Articulated Pose Estimation by a Graphical Model with Image Dependent Pairwise Relations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="fcn.html">
            
                <a href="fcn.html">
            
                    
                    Fully Convoluntional Networks for Segmentaion Segmentation
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.4" data-path="sds.html">
            
                <a href="sds.html">
            
                    
                    Simultaneous Detection and Segmentation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="r-cnn.html">
            
                <a href="r-cnn.html">
            
                    
                    R-CNN & Fast R-CNN & Faster R-CNN
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="deep_hashing.html">
            
                <a href="deep_hashing.html">
            
                    
                    Survey of Deep Hashing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="dense-corr-cycle-consistency.html">
            
                <a href="dense-corr-cycle-consistency.html">
            
                    
                    Learning Dense Correspondence via 3D-guided Cycle Consistency
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Simultaneous Detection and Segmentation</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="simultaneous-detection-and-segmentation">Simultaneous Detection and Segmentation</h1>
<p>Paper: <a href="http://www.eecs.berkeley.edu/Research/Projects/CS/vision/papers/BharathECCV2014.pdf" target="_blank">http://www.eecs.berkeley.edu/Research/Projects/CS/vision/papers/BharathECCV2014.pdf</a></p>
<h2 id="task-explanation">Task explanation</h2>
<blockquote>
<p>Detect all instances of a category in an image and, for each instance, mark the pixels that belongs to it.</p>
</blockquote>
<h2 id="algorithm-steps">Algorithm Steps</h2>
<ol>
<li>Proposal generation</li>
<li>Feature extraction</li>
<li>Region classification</li>
<li>Region refinement</li>
</ol>
<h2 id="evaluation-metrics">Evaluation Metrics</h2>
<p><strong>Output</strong>: a set of object hypotheses, with a predicted segmentation and a score. 
Correct hypothesis: its segmentation overlaps with segmentation of a ground truth instance by more than 50%. 
Penalize duplicates (as traditional bounding box task)</p>
<p><strong>Metric</strong>:
<strong>PR</strong>: precision recall curve
<strong>AP</strong>: average precision (area under the curve)</p>
<p><strong>Notation</strong>:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mtext><mi mathvariant="normal">P</mi><mi mathvariant="normal">R</mi></mtext><mrow><mi>r</mi></mrow></msup></mrow><annotation encoding="application/x-tex">
\text{PR}^{r}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.7143919999999999em;"></span><span class="strut bottom" style="height:0.7143919999999999em;vertical-align:0em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="text mord displaystyle textstyle uncramped"><span class="mord mathrm">P</span><span class="mord mathrm">R</span></span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span></span></span></span></span>
: computed in SDS way. (Messures accuracy of segmentation and need to get each instance separately and completely)</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mtext><mi mathvariant="normal">P</mi><mi mathvariant="normal">R</mi></mtext><mrow><mi>b</mi></mrow></msup></mrow><annotation encoding="application/x-tex">
\text{PR}^{b}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8991079999999999em;"></span><span class="strut bottom" style="height:0.8991079999999999em;vertical-align:0em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="text mord displaystyle textstyle uncramped"><span class="mord mathrm">P</span><span class="mord mathrm">R</span></span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">b</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span></span></span></span></span>
: computed in classical bounding box task</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mtext><mi mathvariant="normal">A</mi><mi mathvariant="normal">P</mi></mtext><mrow><mi>v</mi><mi>o</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">
\text{AP}_{vol}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="text mord displaystyle textstyle uncramped"><span class="mord mathrm">A</span><span class="mord mathrm">P</span></span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span></span></span></span></span>
: the volumn under 
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext><mi mathvariant="normal">P</mi><mi mathvariant="normal">R</mi></mtext></mrow><annotation encoding="application/x-tex">
\text{PR}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base displaystyle textstyle uncramped"><span class="text mord displaystyle textstyle uncramped"><span class="mord mathrm">P</span><span class="mord mathrm">R</span></span></span></span></span></span>
 surface varying the threshold(accurate segmentation)</p>
<h3 id="proposal-generation">Proposal generation</h3>
<p>Care about segments, not just boxes.
Use <strong>MCG</strong>: outperform on the object level Jaccard index metric.(measures the average best overlap achieved by a candidate for ground truth object)
$\text{AP}^{b}$ improved ~ 0.7% if use MCG instead of Selective Search</p>
<h3 id="feature-extraction">Feature extraction</h3>
<ul>
<li>start from R-CNN (object detector): <ul>
<li>Finetuning: take bounding boxes from Selective Search -&gt; paded -&gt; crop -&gt; warp to a square -&gt; feed to network
  Positives: bounding boxes that overlap with GT by more than 50%, label: GT&apos;s label that overlap the most with the box</li>
<li>Test: b-box-&gt;pad-&gt;crop-&gt;warp-&gt;network; generate from one of later layer-&gt; feed into SVM</li>
</ul>
</li>
</ul>
<p>&#xFF08;=&gt; Use b-box of MCG region instead of Selective Search b-box; Use penultimate fully connected layer)</p>
<h4 id="feature-extractors">feature extractors</h4>
<ul>
<li>A: <ul>
<li>finetuned for detection to extract feature of MCG bounding box
  (contain no information about actual region foreground =&gt;)</li>
<li>second set of features; different input: with background masked out</li>
<li>Concaternating two feature vectores</li>
</ul>
</li>
<li>B:<ul>
<li>different network finetuned to extract second set of features 
  change labels: based on segmentation overlap of the region with a GT region (instead of b-box)</li>
</ul>
</li>
<li>C:<ul>
<li>train the neworks jointly: disjoint except final classifier layer
  two pathway: box and region pathway</li>
<li>A and B are both instantiations of C</li>
<li>training: each pathway initialized with network finetuned on each input, and then finetune jointly</li>
<li>test: discard final classifier layer, use the output of penultimate</li>
</ul>
</li>
</ul>
<p><img src="http://cs.unc.edu/~zhenni/blog/notes/images/SDS_net.png" alt="SDS_net"></p>
<h3 id="region-classification">Region classification</h3>
<ul>
<li>train linear SVM:<ul>
<li>train initial one: positives: GT; negatives: regions overlapped GT less than 20%</li>
<li>retrain with new positive set: highest scoring MCG candidates overlapped the GT more than 50%, discard GTs has no such condidates (work better than initial one positive set)</li>
</ul>
</li>
<li>Test: <ul>
<li>use region classifier to score regions</li>
<li>overlapping -&gt; strict non-max suppression with threshold 0 (pixel support should not overlap)
  only use top 20k detection per category (no effect on 
  <span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mtext><mi mathvariant="normal">A</mi><mi mathvariant="normal">P</mi></mtext><mrow><mi>r</mi></mrow></msup></mrow><annotation encoding="application/x-tex">
        \text{AP}^{r}
        </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.7143919999999999em;"></span><span class="strut bottom" style="height:0.7143919999999999em;vertical-align:0em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="text mord displaystyle textstyle uncramped"><span class="mord mathrm">A</span><span class="mord mathrm">P</span></span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span></span></span></span></span>
   metric)</li>
</ul>
</li>
</ul>
<h3 id="region-refinement">Region refinement</h3>
<ul>
<li>predict a coarse, top-down figure-ground mask for each region<ul>
<li>b-box-&gt;pad-&gt; discretize into 10&#xD7;10 grid</li>
<li>for each grid cell, train logistic regression classifier to predict prob that the pixel is in foreground
  feature: CNN and figre-ground mask discretized to the same 10&#xD7;10&#x2606; 
  training set: overlap more than 70% with a GT</li>
</ul>
</li>
<li>train a second stage to combine this coarse mask with region candidate. &#x2606;<ul>
<li>&quot;project coarse mask in the superpixels by assigning to each superpixel the average value of coarse mask in the superpixel, classify each superpixel, using as features this projected value in the superpixel and a 0 or 1 encoding if the superpixel belongs to the original region candidate.&quot;</li>
</ul>
</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="fcn.html" class="navigation navigation-prev " aria-label="Previous page: Fully Convoluntional Networks for Segmentaion Segmentation">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="r-cnn.html" class="navigation navigation-next " aria-label="Next page: R-CNN & Fast R-CNN & Faster R-CNN">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Simultaneous Detection and Segmentation","level":"1.2.4","depth":2,"next":{"title":"R-CNN & Fast R-CNN & Faster R-CNN","level":"1.2.5","depth":2,"path":"old-notes/r-cnn.md","ref":"old-notes/r-cnn.md","articles":[]},"previous":{"title":"Fully Convoluntional Networks for Segmentaion Segmentation","level":"1.2.3","depth":2,"path":"old-notes/fcn.md","ref":"old-notes/fcn.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["katex","youtube","disqus","exercises"],"pluginsConfig":{"disqus":{"useIdentifier":false,"shortName":"zhenni"},"youtube":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"exercises":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"old-notes/sds.md","mtime":"2016-11-16T07:52:26.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2016-11-16T09:26:47.997Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook-plugin-exercises/jsrepl/jsrepl.js" id="jsrepl-script"></script>
    
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.16.1/URI.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-disqus/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-exercises/ace/ace.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-exercises/ace/theme-tomorrow.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-exercises/ace/mode-javascript.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-exercises/exercises.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    


    </body>
</html>

